function initMap(){var n=new google.maps.Map(document.getElementById("map"),{center:{lat:-34.397,lng:150.644},zoom:17}),a=new google.maps.Geocoder,i=new google.maps.InfoWindow;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var o={lat:e.coords.latitude,lng:e.coords.longitude};i.setPosition(o);var t=new google.maps.Marker({position:o,map:n,Title:"Usted está aquí",draggable:!1});n.addListener("center_changed",function(){t.setPosition(n.getCenter())}),n.addListener("dragend",function(){document.getElementById("lat").value=t.getPosition().lat(),document.getElementById("lng").value=t.getPosition().lng(),a.geocode({latLng:t.getPosition()},function(e,o){if(o==google.maps.GeocoderStatus.OK){var t=e[0].formatted_address;document.getElementById("direction").value=t}else console.log(o,e),alert("Se desconoce la dirección debido a : "+o)})}),document.getElementById("lat").value=t.getPosition().lat(),document.getElementById("lng").value=t.getPosition().lng(),a.geocode({latLng:o},function(e,o){if(o==google.maps.GeocoderStatus.OK){var t=e[0].formatted_address;document.getElementById("direction").value=t}else console.log(o,e),alert("Se desconoce la dirección debido a : "+o)}),n.setCenter(o)},function(){handleLocationError(!0,i,n.getCenter())}):handleLocationError(!1,i,n.getCenter())}function handleLocationError(e,o,t){o.setPosition(t),o.setContent(e?"Error: El servicio de geolocalización ha fallado.":"Error: Tu navegador no soporta la geolocazación.")}